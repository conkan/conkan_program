<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="conkan initialize">
<meta name="author" content="Studio REM">
<title>Conkan Initialize</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
</head>
<body>
<div class="container">
  <H1>conkan初期化ページ</H1>

  <!-- 初期化パラメータ入力ページ -->
  <div class="well" id="init">
    <FORM method="POST" action="/initialprocess">
      <div>
        <label>adminパスワード</label><br/>
        <input type="password" name="adpw" class="input-small" placeholder="Password">
        <span class="help-inline">緊急用アカウントのパスワード</span>
      </div>
      <BR/>
      <label>DB接続情報</label><br/>
      <table border="0">
        <TR><TH>DBサーバ</TH>
          <TD>
            <input type="text" name="dbsv" class="span4" placeholder="FQDN or IP Addr">
            <span class="help-inline">DBサーバのFQDNまたはIPアドレス</span>
          </TD>
        </TR>
        <TR><TH>DB名</TH>
          <TD>
            <input type="text" name="dbnm" class="span4" placeholder="DatabaseName">
            <span class="help-inline">作成したDB名</span>
          </TD>
        </TR>
        <TR><TH>DBユーザ</TH>
          <TD>
            <input type="text" name="dbus" class="span4" placeholder="user">
            <span class="help-inline">DB管理ユーザ名</span>
          </TD>
        </TR>
        <TR><TH>DBパスワード</TH>
          <TD>
            <input type="password" name="dbpw" class="span4" placeholder="Password">
            <span class="help-inline">DB管理ユーザのパスワード</span>
          </TD>
        </TR>
      </table>
      <BR/>
      <label>スタッフ登録方法</label>
      <select class="span6" name="addroot" id="addroot">
        <option value="plain">個別入力</option>
        <option value="cybozu" selected>CybouzuLive情報流用</option>
      </select>
      <div class="well">
        <div id="addroot_plain" style="display:none;">
          個々にスタッフを登録します。<BR/>
          新たに登録したスタッフへの連絡は、E-Mailを使用します。<BR/>
          (E-Mailに初期パスワードが含まれるため、セキュリティ上望ましくありません)
        </div>
        <div id="addroot_cybozu">
          CybouzeLiveの特定のグループに参加しているユーザ情報を流用します。<BR/>
          新たに登録したスタッフへの連絡は、CybouzeLiveのチャットを使用します。<BR/>
          <br/>
          <table border="0">
            <TR><TH>コンシュマートークンキー</TH>
              <TD>
                <input type="text" name="oakey" class="span10" placeholder="consumer_key">
                <span class="help-inline">CybouzuLiveが発行したConsumerKey</span>
              </TD>
            </TR>
            <TR><TH>コンシュマーシークレット</TH>
              <TD>
                <input type="text" name="oasec" class="span10" placeholder="consumer_secret">
                <span class="help-inline">CybouzuLiveが発行したConsumerSecret</span>
              </TD>
            </TR>
            <TR><TH>グループ名</TH>
              <TD>
                <input type="text" name="cygr" class="span10" placeholder="Group Name">
                <span class="help-inline">参照するCybouzuLiveのグループ名</span>
              </TD>
          </table>
        </div>
      </div>
      <BR/>
      <button type="submit" class="btn btn-primary btn-large" id="initbtn">
        初期化実行
      </button>
    </FORM>
  </div>

  <!-- 初期化実行中ページ -->
  <div class="well" style="display:none;" id="do_init">
    <H1>conkan初期化中...</H1>
  </div>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script>
  $('#initbtn').click(function() {
    $('#init').hide();
    $('#do_init').show();
  });
  $('#addroot').change(function() {
    if ( $('#addroot').val() == 'plain' ) {
      $('#addroot_plain').show();
      $('#addroot_cybozu').hide();
    } else {
      $('#addroot_plain').hide();
      $('#addroot_cybozu').show();
    }
  });
</script>
</body>
</html>
