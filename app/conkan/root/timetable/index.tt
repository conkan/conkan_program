<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="conkan profile">
<meta name="author" content="Studio REM">
<title>Conkan Timetable</title>
[%- SET useWijGrid = 1 %]
[% PROCESS 'ttwijgethead.tt' -%]
<link rel="stylesheet" href="/static/css/conkan-timetable.css" />
</head>
[%- SET self_li_id = 'timetable' -%]
[%- PROCESS 'tthead.tt' -%]
<div class="container" ng-app="conkanTimeTable">
  <div class="row" id="timetable_up">
    <div id="unset_pglist_wrap" class="col-sm-2">
      <!-- Left: 場所/時刻 未設定企画一覧 -->
    </div>
    <div id="timetable_wrap" class="col-sm-10">
      <div id="timetable_room">
        <!-- Main: タイムテーブル表示: 部屋別 -->
      </div>
      <div id="timetable_cast">
        <!-- Main: タイムテーブル表示: 部屋別 -->
      </div>
    </div>
  </div> <!-- End of timetable_up -->
  <div class="row" id="timetable_down">
    <div id="timetable_edit_form" ng-controller="timeformController">
          <!-- Bottom: 場所/時刻設定フォーム -->
      <div class="form-group">
        <input type="hidden" ng-model="current.pgid">
        <input type="hidden" ng-model="current.id">
        <input type="hidden" ng-model="current.target">
      </div>
      <table class="table table-bordered table-condensed">
        <colgroup>
          <col class="col-sm-1">
          <col class="col-sm-2">
          <col class="col-sm-3">
          <col class="col-sm-1">
          <col class="col-sm-1">
          <col class="col-sm-1">
          <col class="col-sm-3">
        </colgroup>
        <tbody>
          <tr>
            <td style="background-color:#FFcc66">
              {{current.regpgid}}({{current.subno}})
            </td>
            <th colspan="4">{{current.name}}</th>
            <td colspan="2" style="background-color:#FFcc66">
              ({{current.sname}})
            </td>
          </tr>
          <tr>
          </tr>
          <tr>
            <th style="text-align: right">日時1</th>
            <td>
              <select class="col-sm-12" ng-model="current.date1"
                  ng-options="i.id as i.val for i in dateslist"></select>
            </td>
            <td>
              <select class="col-sm-2" ng-model="current.shour1"
                  ng-options="i.id as i.val for i in shourslist"></select>
              <select class="col-sm-2" ng-model="current.smin1"
                  ng-options="i.id as i.val for i in minslist"></select>
              <div align="center" class="col-sm-1"> - </div>
              <select class="col-sm-2" ng-model="current.ehour1"
                  ng-options="i.id as i.val for i in ehourslist"></select>
              <select class="col-sm-2" ng-model="current.emin1"
                  ng-options="i.id as i.val for i in minslist"></select>
            <th style="text-align: right">日時2</th>
            <td colspan="2">
              <select class="col-sm-12" ng-model="current.date2"
                  ng-options="i.id as i.val for i in dateslist"></select>
            </td>
            <td>
              <select class="col-sm-2" ng-model="current.shour2"
                  ng-options="i.id as i.val for i in shourslist"></select>
              <select class="col-sm-2" ng-model="current.smin2"
                  ng-options="i.id as i.val for i in minslist"></select>
              <div align="center" class="col-sm-1"> - </div>
              <select class="col-sm-2" ng-model="current.ehour2"
                  ng-options="i.id as i.val for i in ehourslist"></select>
              <select class="col-sm-2" ng-model="current.emin2"
                  ng-options="i.id as i.val for i in minslist"></select>
            </td>
          </tr>
          <tr>
            <th style="text-align: right">場所</th>
            <td colspan="2">
              <select class="col-sm-12" ng-model="current.roomid"
                  ng-options="i.id as i.val for i in roomlist"></select>
            </td>
            <th style="text-align: right" colspan="2">実行ステータス</th>
            <td colspan="2">
              <select class="col-sm-12" ng-model="current.stat"
                  ng-options="i.id as i.val for i in statuslist"></select>
            </td>
          </tr>
          <tr>
        </tbody>
      </table>
      <script type="text/javascript"> <!-- Formの初期化はsrcではなく埋め込み -->
        var TimeformController = function( $scope ) {
          $scope.current = {
            regpgid : '', subno : '', pgid :   '', id :      '', target : '',
            sname :   '', name :  '', stat :   '',
            date1 :   '', shour1 :  '', smin1 : '', ehour1 : '', emin1 :  '',
            date2 :   '', shour2 :  '', smin2 : '', ehour2 : '', emin2 :  '',
            roomid :  ''
          };
          $scope.statuslist   = [
            {
              [%- FOREACH opt = conf.status %]
                [% opt.id %] : '[% opt.val %]',
              [%- END %]
                none : ''
            }
          ];
          $scope.dateslist    = [
            {
              [%- FOREACH opt = conf.dates %]
                [% opt.id %] : '[% opt.val %]',
              [%- END %]
                none : ''
            }
          ];
          $scope.shourslist   = [
            {
              [%- FOREACH opt = conf.s_hours %]
                [% opt.id %] : '[% opt.val %]',
              [%- END %]
              none : ''
            }
          ];
          $scope.minslist     = [
            {
              [%- FOREACH opt = conf.s_mins %]
                [% opt.id %] : '[% opt.val %]',
              [%- END %]
                none : ''
            }
          ];
          $scope.ehourslist   = [
            {
              [%- FOREACH opt = conf.e_hours %]
                [% opt.id %] : '[% opt.val %]',
              [%- END %]
                none : ''
            }
          ];
          $scope.roomlist     = [
            {
              [%- FOREACH opt = roomlist %]
                [% opt.id %] : '[% opt.val %]',
              [%- END %]
                none : ''
            }
          ];
        };

        var appModule = angular.module('conkanTimeTable', [] );
        appModule.controller('timeformController', TimeformController);
      </script>
    </div> <!-- End of timetable_edit_form -->
  </div> <!-- End of timetable_down -->
</div>
[% PROCESS 'tttail.tt' %]
<script type="text/javascript" src="/static/js/conkan_timetable.js"></script>
</body>
</html>

